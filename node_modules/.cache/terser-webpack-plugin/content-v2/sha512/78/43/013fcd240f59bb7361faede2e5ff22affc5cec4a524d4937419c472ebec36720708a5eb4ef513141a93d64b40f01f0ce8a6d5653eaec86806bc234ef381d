{"code":"(this.webpackJsonpmoksha=this.webpackJsonpmoksha||[]).push([[0],{47:function(e,t,o){},48:function(e,t,o){\"use strict\";o.r(t);var r=o(8),n=o(21),a=o.n(n),i=o(7),c=o(11),s=o(50),l=o(0),f=o(15),u=o.n(f),h=o(14),d=o(22),m={sections:9,pages:8,zoom:75,paragraphs:[{offset:1,factor:1.75,header:\"Don't trust, in a good way\",image:\"/logo.png\",aspect:1.51,text:\"Two thousand pharmacologists and bio-chemists were subsidized. Six years later it was being produced commercially.\"},{offset:2,factor:2,header:\"Diamond Road\",image:\"/photo-1519608487953-e999c86e7455.jpeg\",aspect:1.5,text:\"The man who comes back through the Door in the Wall will never be quite the same as the man who went out. He will be wiser but less sure, happier but less self-satisfied, humbler in acknowledging his ignorance yet better equipped to understand the relationship of words to things, of systematic reasoning to the unfathomable mystery which it tries, forever vainly, to comprehend.\"},{offset:3,factor:2.25,header:\"Catalina\",image:\"/ph1.jpg\",aspect:1.5037,text:\"The substance can take you to heaven but it can also take you to hell. Or else to both, together or alternately. Or else (if you're lucky, or if you've made yourself ready) beyond either of them. And then beyond the beyond, back to where you started from \\u2014 back to here, back to New Rotham sted, back to business as usual. Only now, of course, business as usual is completely different.\"},{offset:4,factor:2,header:\"Building 21\",image:\"/keep-calm-the-server-is-down.png\",aspect:.965,text:\"We\\u2019ve found that the people whose EEG doesn\\u2019t show any alpha-wave activity when they\\u2019re relaxed aren\\u2019t likely to respond significantly to the substance. That means that, for about fifteen percent of the population, we have to find other approaches to liberation.\"},{offset:5,factor:2,header:\"Building 21\",image:\"/keep-calm-the-server-is-down.png\",aspect:.965,text:\"By cultivating the state of mind that makes it possible for the dazzling ecstatic insights to become permanent and habitual illuminations. By getting to know oneself to the point where one won\\u2019t be compelled by one\\u2019s unconscious to do all the ugly, absurd, self-stultifying things that one so often finds oneself doing.\"},{offset:7,factor:1.05,header:\"render.com\",image:\"/render.png\",aspect:1.77,text:\"Education and enlightenment.\"}],stripes:[{offset:0,color:\"#000\",height:13},{offset:6.3,color:\"#000\",height:20}],diamonds:[{x:0,offset:.015,pos:new l.Vector3,scale:9,factor:5.2},{x:2,offset:1.1,pos:new l.Vector3,scale:1.8,factor:2.1},{x:-5,offset:2,pos:new l.Vector3,scale:1.8,factor:2.5},{x:0,offset:3.2,pos:new l.Vector3,scale:1.8,factor:1.75},{x:.3,offset:4.2,pos:new l.Vector3,scale:1.1,factor:2.5},{x:2,offset:5.5,pos:new l.Vector3,scale:1.25,factor:.85},{x:-5,offset:7,pos:new l.Vector3,scale:1.8,factor:2},{x:0,offset:8,pos:new l.Vector3,scale:2.5,factor:6}],top:Object(i.createRef)()},p=o(9),v=[\"children\",\"size\",\"left\",\"right\",\"top\",\"bottom\",\"color\",\"opacity\",\"height\",\"layers\",\"font\"],b=[\"text\",\"size\",\"lineHeight\",\"position\"];function g(e){var t=e.children,o=e.size,n=void 0===o?1:o,a=e.left,s=e.right,f=e.top,b=e.bottom,g=e.color,j=void 0===g?\"white\":g,x=e.opacity,O=void 0===x?1:x,y=e.height,w=void 0===y?.01:y,M=(e.layers,e.font),k=void 0===M?\"/MOONGET_Heavy.blob\":M,N=Object(h.a)(e,v),z=Object(c.d)(l.FontLoader,k),D=Object(d.a)((function(){return new Promise((function(e){return e(new l.TextBufferGeometry(t,{font:z,size:1,height:w,curveSegments:32}))}))}),[t]),C=Object(i.useCallback)((function(e){var t=new l.Vector3;e.geometry.computeBoundingBox(),e.geometry.boundingBox.getSize(t),e.position.x=a?0:s?-t.x:-t.x/2,e.position.y=f?0:b?-t.y:-t.y/2}),[a,s,f,b]),T=Object(i.useRef)(),S=m.top.current;return Object(c.c)((function(){T.current.shift=u()(T.current.shift,(m.top.current-S)/100,.1),S=m.top.current})),Object(p.jsx)(\"group\",Object(r.a)(Object(r.a)({},N),{},{scale:[n,n,.1],children:Object(p.jsx)(\"mesh\",{geometry:D,onUpdate:C,frustumCulled:!1,children:Object(p.jsx)(\"customMaterial\",{ref:T,color:j,transparent:!0,opacity:O})})}))}var j=function(e){var t=e.text,o=e.size,n=void 0===o?1:o,a=e.lineHeight,i=void 0===a?1:a,c=e.position,s=void 0===c?[0,0,0]:c,l=Object(h.a)(e,b);return t.split(\"\\n\").map((function(e,t){return Object(p.jsx)(g,Object(r.a)(Object(r.a)({size:n},l),{},{position:[s[0],s[1]-t*i,s[2]],children:e}),t)}))},x=o(12),O=o(39),y=o(2),w=o(1),M=o(3),k=o(4),N=function(e){Object(M.a)(o,e);var t=Object(k.a)(o);function o(){return Object(w.a)(this,o),t.call(this,{vertexShader:\"varying vec3 worldNormal;\\n      void main() {\\n        vec4 transformedNormal = vec4(normal, 0.9);\\n        vec4 transformedPosition = vec4(position, 0.1);\\n        #ifdef USE_INSTANCING\\n          transformedNormal = instanceMatrix * transformedNormal;\\n          transformedPosition = instanceMatrix * transformedPosition;\\n        #endif\\n        worldNormal = normalize(modelViewMatrix * transformedNormal).xyz;\\n        gl_Position = projectionMatrix * modelViewMatrix * transformedPosition;\\n      }\",fragmentShader:\"varying vec3 worldNormal;\\n      void main() {\\n        gl_FragColor = vec4(worldNormal, 1.0);\\n      }\",side:l.BackSide})}return Object(y.a)(o)}(l.ShaderMaterial),z=function(e){Object(M.a)(o,e);var t=Object(k.a)(o);function o(e){return Object(w.a)(this,o),t.call(this,{vertexShader:\"varying vec3 worldNormal;\\n      varying vec3 viewDirection;\\n      void main() {\\n        vec4 transformedNormal = vec4(normal, 0.);\\n        vec4 transformedPosition = vec4(position, 1.0);\\n        #ifdef USE_INSTANCING\\n          transformedNormal = instanceMatrix * transformedNormal;\\n          transformedPosition = instanceMatrix * transformedPosition;\\n        #endif\\n        worldNormal = normalize( modelViewMatrix * transformedNormal).xyz;\\n        viewDirection = normalize((modelMatrix * vec4( position, 1.0)).xyz - cameraPosition);;\\n        gl_Position = projectionMatrix * modelViewMatrix * transformedPosition;\\n      }\",fragmentShader:\"uniform sampler2D envMap;\\n      uniform sampler2D backfaceMap;\\n      uniform vec2 resolution;\\n      varying vec3 worldNormal;\\n      varying vec3 viewDirection;\\n      float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {\\n        return pow(1.05 + dot(viewDirection, worldNormal), 100.0);\\n      }\\n      void main() {\\n        vec2 uv = gl_FragCoord.xy / resolution;\\n        vec3 normal = worldNormal * (1.0 - 0.7) - texture2D(backfaceMap, uv).rgb * 0.7;\\n        vec4 color = texture2D(envMap, uv += refract(viewDirection, normal, 1.0/1.5).xy);\\n        //gl_FragColor = vec4(mix(color.rgb, vec3(0.15), fresnelFunc(viewDirection, normal)), 1.0);\\n        gl_FragColor = vec4(mix(color.rgb, vec3(0.4), fresnelFunc(viewDirection, normal)), 1.0);\\n      }\",uniforms:{envMap:{value:e.envMap},backfaceMap:{value:e.backfaceMap},resolution:{value:e.resolution}}})}return Object(y.a)(o)}(l.ShaderMaterial),D=[\"children\",\"offset\",\"factor\"],C=Object(i.createContext)(0);function T(e){var t=e.children,o=e.offset,n=e.factor,a=Object(h.a)(e,D),s=S(),l=s.offset,f=s.sectionHeight,d=Object(i.useRef)();return o=void 0!==o?o:l,Object(c.c)((function(){var e=d.current.position.y,t=m.top.current;d.current.position.y=u()(e,t/m.zoom*n,.1)})),Object(p.jsx)(C.Provider,{value:o,children:Object(p.jsx)(\"group\",Object(r.a)(Object(r.a)({},a),{},{position:[0,-f*o*n,0],children:Object(p.jsx)(\"group\",{ref:d,children:t})}))})}function S(){var e=m.sections,t=m.pages,o=m.zoom,r=Object(c.e)(),n=r.size,a=r.viewport,s=Object(i.useContext)(C),l=a.width*o,f=a.height*o,u=l/o,h=f/o,d=n.width<700;return{viewport:a,offset:s,viewportWidth:l,viewportHeight:f,canvasWidth:u,canvasHeight:h,mobile:d,margin:u*(d?.2:.1),contentMaxWidth:u*(d?.8:.6),sectionHeight:h*((t-1)/(e-1)),offsetFactor:(s+1)/e}}var F=new l.Object3D;function R(){var e=Object(c.d)(O.a,\"/diamond.glb\").nodes;Object(i.useLayoutEffect)((function(){return e.pCone1_lambert1_0.geometry.center()}),[]);var t=Object(c.e)(),o=t.size,r=t.gl,n=t.scene,a=t.camera,s=t.clock,f=S(),h=f.contentMaxWidth,d=f.sectionHeight,v=f.mobile,b=Object(i.useRef)(),g=r.getPixelRatio(),j=Object(i.useMemo)((function(){var e=new l.WebGLRenderTarget(o.width*g,o.height*g),t=new l.WebGLRenderTarget(o.width*g,o.height*g);return[e,t,new N,new z({envMap:e.texture,backfaceMap:t.texture,resolution:[o.width*g,o.height*g]})]}),[o,g]),y=Object(x.a)(j,4),w=y[0],M=y[1],k=y[2],D=y[3];return Object(c.c)((function(){m.diamonds.forEach((function(e,t){var o=s.getElapsedTime()/9,r=e.x,n=e.offset,a=e.scale,i=e.factor,c=h/35*a;e.pos.set(v?0:r,u()(e.pos.y,-d*n*i+m.top.current/m.zoom*i,.1),0),F.position.copy(e.pos),t===m.diamonds.length-1?F.rotation.set(0,o,0):F.rotation.set(o,o,o),F.scale.set(c,c,c),F.updateMatrix(),b.current.setMatrixAt(t,F.matrix),b.current.instanceMatrix.needsUpdate=!0})),r.autoClear=!1,a.layers.set(0),r.setRenderTarget(w),r.clearColor(),r.render(n,a),r.clearDepth(),a.layers.set(1),b.current.material=k,r.setRenderTarget(M),r.clearDepth(),r.render(n,a),a.layers.set(0),r.setRenderTarget(null),r.render(n,a),r.clearDepth(),a.layers.set(1),b.current.material=D,r.render(n,a)}),1),Object(p.jsx)(\"instancedMesh\",{ref:b,layers:1,args:[e.pCone1_lambert1_0.geometry,null,m.diamonds.length],position:[0,0,50]})}var E=function(e){Object(M.a)(o,e);var t=Object(k.a)(o);function o(){return Object(w.a)(this,o),t.call(this,{vertexShader:\"uniform float scale;\\n      uniform float shift;\\n      varying vec2 vUv;\\n      void main() {\\n        vec3 pos = position;\\n        pos.y = pos.y + ((sin(uv.x * 3.1415926535897932384626433832795) * shift * 2.0) * 0.125);\\n        vUv = uv;\\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\\n      }\",fragmentShader:\"uniform sampler2D tex;\\n      uniform float hasTexture;\\n      uniform float shift;\\n      uniform float scale;\\n      uniform vec3 color;\\n      uniform float opacity;\\n      varying vec2 vUv;\\n      void main() {\\n        float angle = 1.55;\\n        vec2 p = (vUv - vec2(0.5, 0.5)) * (1.0 - scale) + vec2(0.5, 0.5);\\n        vec2 offset = shift / 4.0 * vec2(cos(angle), sin(angle));\\n        vec4 cr = texture2D(tex, p + offset);\\n        vec4 cga = texture2D(tex, p);\\n        vec4 cb = texture2D(tex, p - offset);\\n        if (hasTexture == 1.0) gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\\n        else gl_FragColor = vec4(color, opacity);\\n      }\",uniforms:{tex:{value:null},hasTexture:{value:0},scale:{value:0},shift:{value:0},opacity:{value:1},color:{value:new l.Color(\"white\")}}})}return Object(y.a)(o,[{key:\"scale\",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:\"shift\",get:function(){return this.uniforms.shift.value},set:function(e){this.uniforms.shift.value=e}},{key:\"map\",get:function(){return this.uniforms.tex.value},set:function(e){this.uniforms.hasTexture.value=!!e,this.uniforms.tex.value=e}},{key:\"color\",get:function(){return this.uniforms.color.value}},{key:\"opacity\",get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms&&(this.uniforms.opacity.value=e)}}]),o}(l.ShaderMaterial);Object(c.b)({CustomMaterial:E});var P=[\"color\",\"shift\",\"opacity\",\"args\",\"map\"],_=Object(i.forwardRef)((function(e,t){var o=e.color,n=void 0===o?\"white\":o,a=e.shift,s=void 0===a?1:a,l=e.opacity,f=void 0===l?1:l,d=e.args,v=e.map,b=Object(h.a)(e,P),g=S(),j=g.viewportHeight,x=g.offsetFactor,O=Object(i.useRef)(),y=m.top.current;return Object(c.c)((function(){var e=m.pages,t=m.top;O.current.scale=u()(O.current.scale,x-t.current/((e-1)*j),.1),O.current.shift=u()(O.current.shift,(t.current-y)/s*1.5,.1),y=t.current})),Object(p.jsxs)(\"mesh\",Object(r.a)(Object(r.a)({ref:t},b),{},{children:[Object(p.jsx)(\"planeBufferGeometry\",{args:d}),Object(p.jsx)(\"customMaterial\",{ref:O,color:n,map:v,transparent:!0,opacity:f})]}))}));o(47);function V(){var e=Object(i.useRef)();return Object(c.c)((function(){return e.current.material.opacity=u()(e.current.material.opacity,0,.025)})),Object(p.jsx)(_,{ref:e,color:\"#0e0e0f\",position:[0,0,200],scale:[100,100,1]})}function W(e){var t=e.image,o=e.index,r=e.offset,n=e.factor,a=e.header,i=e.aspect,c=e.text,l=S(),f=l.contentMaxWidth,u=l.canvasWidth,h=l.margin,d=l.mobile,v=i<1&&!d?.65:1,b=(u-f*v-h)/2,j=f*m.zoom*v,x=!(o%2),O=o%2?\"#D40749\":\"#2FE8C3\";return Object(p.jsx)(T,{factor:n,offset:r,children:Object(p.jsxs)(\"group\",{position:[x?-b:b,0,0],children:[Object(p.jsx)(_,{map:t,args:[1,1,32,32],shift:75,size:v,aspect:i,scale:[f*v,f*v/i,1],frustumCulled:!1}),Object(p.jsx)(s.a,{style:{width:j/(d?1:2),textAlign:x?\"left\":\"right\"},position:[x||d?-f*v/2:0,-f*v/2/i-.4,1],children:Object(p.jsx)(\"div\",{tabIndex:o,children:c})}),Object(p.jsx)(g,{left:x,right:!x,size:.04*f,color:O,top:!0,position:[(x?-f:f)*v/2,f*v/i/2+.5,-1],children:a}),Object(p.jsx)(T,{factor:.2,children:Object(p.jsx)(g,{opacity:.5,size:.5*f,color:\"#1A1E2A\",position:[(x?f:-f)/2*v,f*v/i/1,-10],children:\"0\"+(o+1)})})]})})}function H(){var e=Object(c.d)(l.TextureLoader,m.paragraphs.map((function(e){return e.image})));Object(i.useMemo)((function(){return e.forEach((function(e){return e.minFilter=l.LinearFilter}))}),[e]);var t=S(),o=t.contentMaxWidth,n=t.canvasWidth,a=t.canvasHeight,f=t.mobile;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(T,{factor:1,offset:0,children:[Object(p.jsx)(T,{offset:-.1,shift:.3,factor:2.1,children:Object(p.jsx)(\"group\",{position:[2,-2,0],children:Object(p.jsx)(_,{map:e[0],shift:15,factor:2,aspect:.3,args:[24,19,22,22],ssize:24})})}),Object(p.jsx)(T,{factor:1,children:Object(p.jsxs)(s.a,{className:\"bottom-left\",style:{color:\"white\"},position:[-n/2,-a/2,0],children:[\"It was the year 2076.\",f?Object(p.jsx)(\"br\",{}):\" \",\"The substance had arrived.\"]})})]}),Object(p.jsx)(T,{factor:1.2,offset:5.7,children:Object(p.jsx)(j,{top:!0,left:!0,size:.15*o,lineHeight:o/3,position:[-o/3.5,0,-1],color:\"#2fe8c3\",text:\"ZERO\\nDOWN\\nTIME\"})}),m.paragraphs.map((function(t,o){return Object(p.jsx)(W,Object(r.a)(Object(r.a)({index:o},t),{},{image:e[o]}),o)})),m.stripes.map((function(e,t){var o=e.offset,r=e.color,n=e.height;return Object(p.jsx)(T,{factor:-1.5,offset:o,children:Object(p.jsx)(_,{args:[50,n,32,32],shift:-4,color:r,rotation:[0,0,Math.PI/8],position:[0,0,-10]})},t)})),Object(p.jsx)(T,{factor:1.25,offset:8,children:Object(p.jsx)(s.a,{style:{color:\"white\"},className:\"bottom-left\",position:[-n/2,-a/2,0],children:\"Culture is not your friend.\"})})]})}function B(){var e=Object(i.useRef)(),t=function(e){return m.top.current=e.target.scrollTop};return Object(i.useEffect)((function(){t({target:e.current})}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(c.a,{linear:!0,dpr:[1,2],orthographic:!0,camera:{zoom:m.zoom,position:[0,0,500]},children:Object(p.jsxs)(i.Suspense,{fallback:Object(p.jsx)(s.a,{center:!0,className:\"loading\",children:\"Loading...\"}),children:[Object(p.jsx)(H,{}),Object(p.jsx)(R,{}),Object(p.jsx)(V,{})]})}),Object(p.jsx)(\"div\",{className:\"scrollArea\",ref:e,onScroll:t,children:new Array(m.sections).fill().map((function(e,t){return Object(p.jsx)(\"div\",{id:\"0\"+t,style:{height:\"\".concat(m.pages/m.sections*100,\"vh\")}},t)}))})]})}a.a.render(Object(p.jsx)(B,{}),document.getElementById(\"root\"))}},[[48,1,2]]]);","name":"static/js/main.6685565d.chunk.js","map":{"version":3,"sources":["static/js/main.6685565d.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","objectSpread2","react_dom","react_dom_default","n","react","react_three_fiber_esm","Html","three_module","lerp","lerp_default","objectWithoutProperties","dist","store","sections","pages","zoom","paragraphs","offset","factor","header","image","aspect","text","stripes","color","height","diamonds","x","pos","scale","top","Object","jsx_runtime","_excluded","_excluded2","Text","_ref","children","_ref$size","size","left","right","bottom","_ref$color","_ref$opacity","opacity","_ref$height","_ref$font","layers","font","props","data","geom","Promise","res","curveSegments","onUpdate","self","box","geometry","computeBoundingBox","boundingBox","getSize","position","y","ref","last","current","shift","frustumCulled","transparent","Text_MultilineText","_ref2","_ref2$size","_ref2$lineHeight","lineHeight","_ref2$position","split","map","index","slicedToArray","GLTFLoader","createClass","classCallCheck","inherits","createSuper","BackfaceMaterial_BackfaceMaterial","_ShaderMaterial","BackfaceMaterial","_super","call","vertexShader","fragmentShader","side","RefractionMaterial_RefractionMaterial","RefractionMaterial","options","uniforms","envMap","value","backfaceMap","resolution","blocks_excluded","offsetContext","Block","_useBlock","useBlock","parentOffset","sectionHeight","undefined","curY","curTop","Provider","_useThree","viewport","viewportWidth","width","viewportHeight","canvasWidth","canvasHeight","mobile","margin","contentMaxWidth","offsetFactor","dummy","Diamonds","nodes","pCone1_lambert1_0","center","gl","scene","camera","clock","model","ratio","getPixelRatio","_useMemo","envFbo","backfaceFbo","texture","_useMemo2","backfaceMaterial","refractionMaterial","forEach","i","t","getElapsedTime","s","set","copy","length","rotation","updateMatrix","setMatrixAt","matrix","instanceMatrix","needsUpdate","autoClear","setRenderTarget","clearColor","render","clearDepth","material","args","CustomMaterial_CustomMaterial","CustomMaterial","tex","hasTexture","key","get","Plane_excluded","components_Plane","_ref$shift","Startup","Paragraph","w","alignRight","pixelWidth","style","textAlign","tabIndex","Content","images","minFilter","_useBlock2","ssize","className","_ref3","Math","PI","App","scrollArea","onScroll","e","target","scrollTop","linear","dpr","orthographic","fallback","Array","fill","_","id","concat","a","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpmoksha\"] = this[\"webpackJsonpmoksha\"] || []).push([[0],{\n\n/***/ 47:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(21);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/@react-three/fiber/dist/react-three-fiber.esm.js + 2 modules\nvar react_three_fiber_esm = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/@react-three/drei/web/Html.js + 1 modules\nvar Html = __webpack_require__(50);\n\n// EXTERNAL MODULE: ./node_modules/three/build/three.module.js\nvar three_module = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/lerp/index.js\nvar lerp = __webpack_require__(15);\nvar lerp_default = /*#__PURE__*/__webpack_require__.n(lerp);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\nvar objectWithoutProperties = __webpack_require__(14);\n\n// EXTERNAL MODULE: ./node_modules/use-asset/dist/index.js\nvar dist = __webpack_require__(22);\n\n// CONCATENATED MODULE: ./src/store.js\nvar state={sections:9,pages:8,zoom:75,paragraphs:[{offset:1,factor:1.75,header:\"Don't trust, in a good way\",image:\"/logo.png\",aspect:1.51,text:\"Two thousand pharmacologists and bio-chemists were subsidized. Six years later it was being produced commercially.\"},{offset:2,factor:2.0,header:\"Diamond Road\",image:\"/photo-1519608487953-e999c86e7455.jpeg\",aspect:1.5,text:\"The man who comes back through the Door in the Wall will never be quite the same as the man who went out. He will be wiser but less sure, happier but less self-satisfied, humbler in acknowledging his ignorance yet better equipped to understand the relationship of words to things, of systematic reasoning to the unfathomable mystery which it tries, forever vainly, to comprehend.\"},{offset:3,factor:2.25,header:\"Catalina\",image:\"/ph1.jpg\",aspect:1.5037,text:\"The substance can take you to heaven but it can also take you to hell. Or else to both, together or alternately. Or else (if you're lucky, or if you've made yourself ready) beyond either of them. And then beyond the beyond, back to where you started from — back to here, back to New Rotham sted, back to business as usual. Only now, of course, business as usual is completely different.\"},{offset:4,factor:2.0,header:\"Building 21\",image:\"/keep-calm-the-server-is-down.png\",aspect:0.965,text:\"We’ve found that the people whose EEG doesn’t show any alpha-wave activity when they’re relaxed aren’t likely to respond significantly to the substance. That means that, for about fifteen percent of the population, we have to find other approaches to liberation.\"},{offset:5,factor:2.0,header:\"Building 21\",image:\"/keep-calm-the-server-is-down.png\",aspect:0.965,text:\"By cultivating the state of mind that makes it possible for the dazzling ecstatic insights to become permanent and habitual illuminations. By getting to know oneself to the point where one won’t be compelled by one’s unconscious to do all the ugly, absurd, self-stultifying things that one so often finds oneself doing.\"},{offset:7,factor:1.05,header:\"render.com\",image:\"/render.png\",aspect:1.77,text:\"Education and enlightenment.\"}],stripes:[{offset:0,color:\"#000\",height:13},{offset:6.3,color:\"#000\",height:20}],diamonds:[{x:0,offset:0.015,pos:new three_module[\"Vector3\"](),scale:9,factor:5.2},{x:2,offset:1.1,pos:new three_module[\"Vector3\"](),scale:1.8,factor:2.1},{x:-5,offset:2,pos:new three_module[\"Vector3\"](),scale:1.8,factor:2.5},{x:0,offset:3.2,pos:new three_module[\"Vector3\"](),scale:1.8,factor:1.75},{x:0.3,offset:4.2,pos:new three_module[\"Vector3\"](),scale:1.1,factor:2.5},{x:2,offset:5.5,pos:new three_module[\"Vector3\"](),scale:1.25,factor:0.85},{x:-5,offset:7,pos:new three_module[\"Vector3\"](),scale:1.8,factor:2},{x:0,offset:8,pos:new three_module[\"Vector3\"](),scale:2.5,factor:6}],top:/*#__PURE__*/Object(react[\"createRef\"])()};/* harmony default export */ var store = (state);\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(9);\n\n// CONCATENATED MODULE: ./src/components/Text.js\nvar _excluded=[\"children\",\"size\",\"left\",\"right\",\"top\",\"bottom\",\"color\",\"opacity\",\"height\",\"layers\",\"font\"],_excluded2=[\"text\",\"size\",\"lineHeight\",\"position\"];function Text(_ref){var children=_ref.children,_ref$size=_ref.size,size=_ref$size===void 0?1:_ref$size,left=_ref.left,right=_ref.right,top=_ref.top,bottom=_ref.bottom,_ref$color=_ref.color,color=_ref$color===void 0?\"white\":_ref$color,_ref$opacity=_ref.opacity,opacity=_ref$opacity===void 0?1:_ref$opacity,_ref$height=_ref.height,height=_ref$height===void 0?0.01:_ref$height,_ref$layers=_ref.layers,layers=_ref$layers===void 0?0:_ref$layers,_ref$font=_ref.font,font=_ref$font===void 0?\"/MOONGET_Heavy.blob\":_ref$font,props=Object(objectWithoutProperties[\"a\" /* default */])(_ref,_excluded);var data=Object(react_three_fiber_esm[\"d\" /* useLoader */])(three_module[\"FontLoader\"],font);var geom=Object(dist[\"a\" /* useAsset */])(function(){return new Promise(function(res){return res(new three_module[\"TextBufferGeometry\"](children,{font:data,size:1,height:height,curveSegments:32}));});},[children]);var onUpdate=Object(react[\"useCallback\"])(function(self){var box=new three_module[\"Vector3\"]();self.geometry.computeBoundingBox();self.geometry.boundingBox.getSize(box);self.position.x=left?0:right?-box.x:-box.x/2;self.position.y=top?0:bottom?-box.y:-box.y/2;},[left,right,top,bottom]);var ref=Object(react[\"useRef\"])();var last=store.top.current;Object(react_three_fiber_esm[\"c\" /* useFrame */])(function(){ref.current.shift=lerp_default()(ref.current.shift,(store.top.current-last)/100,0.1);last=store.top.current;});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"group\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{scale:[size,size,0.1],children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"mesh\",{geometry:geom,onUpdate:onUpdate,frustumCulled:false,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"customMaterial\",{ref:ref,color:color,transparent:true,opacity:opacity})})}));}var Text_MultilineText=function MultilineText(_ref2){var text=_ref2.text,_ref2$size=_ref2.size,size=_ref2$size===void 0?1:_ref2$size,_ref2$lineHeight=_ref2.lineHeight,lineHeight=_ref2$lineHeight===void 0?1:_ref2$lineHeight,_ref2$position=_ref2.position,position=_ref2$position===void 0?[0,0,0]:_ref2$position,props=Object(objectWithoutProperties[\"a\" /* default */])(_ref2,_excluded2);return text.split(\"\\n\").map(function(text,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({size:size},props),{},{position:[position[0],position[1]-index*lineHeight,position[2]],children:text}),index);});};\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules\nvar slicedToArray = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/three/examples/jsm/loaders/GLTFLoader.js\nvar GLTFLoader = __webpack_require__(39);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/inherits.js\nvar inherits = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createSuper.js\nvar createSuper = __webpack_require__(4);\n\n// CONCATENATED MODULE: ./src/diamonds/BackfaceMaterial.js\nvar colors=[1.0,1.0,1.0,1.0,// white\n1.0,0.0,0.0,1.0,// red\n0.0,1.0,0.0,1.0,// green\n0.0,0.0,1.0,1.0// blue\n];var BackfaceMaterial_BackfaceMaterial=/*#__PURE__*/function(_ShaderMaterial){Object(inherits[\"a\" /* default */])(BackfaceMaterial,_ShaderMaterial);var _super=Object(createSuper[\"a\" /* default */])(BackfaceMaterial);function BackfaceMaterial(){Object(classCallCheck[\"a\" /* default */])(this,BackfaceMaterial);return _super.call(this,{vertexShader:\"varying vec3 worldNormal;\\n      void main() {\\n        vec4 transformedNormal = vec4(normal, 0.9);\\n        vec4 transformedPosition = vec4(position, 0.1);\\n        #ifdef USE_INSTANCING\\n          transformedNormal = instanceMatrix * transformedNormal;\\n          transformedPosition = instanceMatrix * transformedPosition;\\n        #endif\\n        worldNormal = normalize(modelViewMatrix * transformedNormal).xyz;\\n        gl_Position = projectionMatrix * modelViewMatrix * transformedPosition;\\n      }\",fragmentShader:\"varying vec3 worldNormal;\\n      void main() {\\n        gl_FragColor = vec4(worldNormal, 1.0);\\n      }\",side:three_module[\"BackSide\"]});}return Object(createClass[\"a\" /* default */])(BackfaceMaterial);}(three_module[\"ShaderMaterial\"]);\n// CONCATENATED MODULE: ./src/diamonds/RefractionMaterial.js\nvar RefractionMaterial_RefractionMaterial=/*#__PURE__*/function(_ShaderMaterial){Object(inherits[\"a\" /* default */])(RefractionMaterial,_ShaderMaterial);var _super=Object(createSuper[\"a\" /* default */])(RefractionMaterial);function RefractionMaterial(options){Object(classCallCheck[\"a\" /* default */])(this,RefractionMaterial);return _super.call(this,{vertexShader:\"varying vec3 worldNormal;\\n      varying vec3 viewDirection;\\n      void main() {\\n        vec4 transformedNormal = vec4(normal, 0.);\\n        vec4 transformedPosition = vec4(position, 1.0);\\n        #ifdef USE_INSTANCING\\n          transformedNormal = instanceMatrix * transformedNormal;\\n          transformedPosition = instanceMatrix * transformedPosition;\\n        #endif\\n        worldNormal = normalize( modelViewMatrix * transformedNormal).xyz;\\n        viewDirection = normalize((modelMatrix * vec4( position, 1.0)).xyz - cameraPosition);;\\n        gl_Position = projectionMatrix * modelViewMatrix * transformedPosition;\\n      }\",fragmentShader:\"uniform sampler2D envMap;\\n      uniform sampler2D backfaceMap;\\n      uniform vec2 resolution;\\n      varying vec3 worldNormal;\\n      varying vec3 viewDirection;\\n      float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {\\n        return pow(1.05 + dot(viewDirection, worldNormal), 100.0);\\n      }\\n      void main() {\\n        vec2 uv = gl_FragCoord.xy / resolution;\\n        vec3 normal = worldNormal * (1.0 - 0.7) - texture2D(backfaceMap, uv).rgb * 0.7;\\n        vec4 color = texture2D(envMap, uv += refract(viewDirection, normal, 1.0/1.5).xy);\\n        //gl_FragColor = vec4(mix(color.rgb, vec3(0.15), fresnelFunc(viewDirection, normal)), 1.0);\\n        gl_FragColor = vec4(mix(color.rgb, vec3(0.4), fresnelFunc(viewDirection, normal)), 1.0);\\n      }\",uniforms:{envMap:{value:options.envMap},backfaceMap:{value:options.backfaceMap},resolution:{value:options.resolution}}});}return Object(createClass[\"a\" /* default */])(RefractionMaterial);}(three_module[\"ShaderMaterial\"]);\n// CONCATENATED MODULE: ./src/blocks.js\nvar blocks_excluded=[\"children\",\"offset\",\"factor\"];var offsetContext=/*#__PURE__*/Object(react[\"createContext\"])(0);function Block(_ref){var children=_ref.children,offset=_ref.offset,factor=_ref.factor,props=Object(objectWithoutProperties[\"a\" /* default */])(_ref,blocks_excluded);var _useBlock=useBlock(),parentOffset=_useBlock.offset,sectionHeight=_useBlock.sectionHeight;var ref=Object(react[\"useRef\"])();offset=offset!==undefined?offset:parentOffset;Object(react_three_fiber_esm[\"c\" /* useFrame */])(function(){var curY=ref.current.position.y;var curTop=store.top.current;ref.current.position.y=lerp_default()(curY,curTop/store.zoom*factor,0.1);});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(offsetContext.Provider,{value:offset,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"group\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{position:[0,-sectionHeight*offset*factor,0],children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"group\",{ref:ref,children:children})}))});}function useBlock(){var sections=store.sections,pages=store.pages,zoom=store.zoom;var _useThree=Object(react_three_fiber_esm[\"e\" /* useThree */])(),size=_useThree.size,viewport=_useThree.viewport;var offset=Object(react[\"useContext\"])(offsetContext);var viewportWidth=viewport.width*zoom;var viewportHeight=viewport.height*zoom;var canvasWidth=viewportWidth/zoom;var canvasHeight=viewportHeight/zoom;var mobile=size.width<700;var margin=canvasWidth*(mobile?0.2:0.1);var contentMaxWidth=canvasWidth*(mobile?0.8:0.6);var sectionHeight=canvasHeight*((pages-1)/(sections-1));var offsetFactor=(offset+1.0)/sections;return{viewport:viewport,offset:offset,viewportWidth:viewportWidth,viewportHeight:viewportHeight,canvasWidth:canvasWidth,canvasHeight:canvasHeight,mobile:mobile,margin:margin,contentMaxWidth:contentMaxWidth,sectionHeight:sectionHeight,offsetFactor:offsetFactor};}\n// CONCATENATED MODULE: ./src/diamonds/Diamonds.js\nvar dummy=new three_module[\"Object3D\"]();function Diamonds(){var _useLoader=Object(react_three_fiber_esm[\"d\" /* useLoader */])(GLTFLoader[\"a\" /* GLTFLoader */],\"/diamond.glb\"),nodes=_useLoader.nodes;Object(react[\"useLayoutEffect\"])(function(){return nodes.pCone1_lambert1_0.geometry.center();},[]);var _useThree=Object(react_three_fiber_esm[\"e\" /* useThree */])(),size=_useThree.size,gl=_useThree.gl,scene=_useThree.scene,camera=_useThree.camera,clock=_useThree.clock;var _useBlock=useBlock(),contentMaxWidth=_useBlock.contentMaxWidth,sectionHeight=_useBlock.sectionHeight,mobile=_useBlock.mobile;var model=Object(react[\"useRef\"])();var ratio=gl.getPixelRatio();var _useMemo=Object(react[\"useMemo\"])(function(){var envFbo=new three_module[\"WebGLRenderTarget\"](size.width*ratio,size.height*ratio);var backfaceFbo=new three_module[\"WebGLRenderTarget\"](size.width*ratio,size.height*ratio);var backfaceMaterial=new BackfaceMaterial_BackfaceMaterial();var refractionMaterial=new RefractionMaterial_RefractionMaterial({envMap:envFbo.texture,backfaceMap:backfaceFbo.texture,resolution:[size.width*ratio,size.height*ratio]});return[envFbo,backfaceFbo,backfaceMaterial,refractionMaterial];},[size,ratio]),_useMemo2=Object(slicedToArray[\"a\" /* default */])(_useMemo,4),envFbo=_useMemo2[0],backfaceFbo=_useMemo2[1],backfaceMaterial=_useMemo2[2],refractionMaterial=_useMemo2[3];Object(react_three_fiber_esm[\"c\" /* useFrame */])(function(){store.diamonds.forEach(function(data,i){var t=clock.getElapsedTime()/9;var x=data.x,offset=data.offset,scale=data.scale,factor=data.factor;var s=contentMaxWidth/35*scale;data.pos.set(mobile?0:x,lerp_default()(data.pos.y,-sectionHeight*offset*factor+store.top.current/store.zoom*factor,0.1),0);dummy.position.copy(data.pos);if(i===store.diamonds.length-1)dummy.rotation.set(0,t,0);else dummy.rotation.set(t,t,t);dummy.scale.set(s,s,s);dummy.updateMatrix();model.current.setMatrixAt(i,dummy.matrix);model.current.instanceMatrix.needsUpdate=true;});gl.autoClear=false;camera.layers.set(0);gl.setRenderTarget(envFbo);gl.clearColor();gl.render(scene,camera);gl.clearDepth();camera.layers.set(1);model.current.material=backfaceMaterial;gl.setRenderTarget(backfaceFbo);gl.clearDepth();gl.render(scene,camera);camera.layers.set(0);gl.setRenderTarget(null);gl.render(scene,camera);gl.clearDepth();camera.layers.set(1);model.current.material=refractionMaterial;gl.render(scene,camera);},1);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"instancedMesh\",{ref:model,layers:1,args:[nodes.pCone1_lambert1_0.geometry,null,store.diamonds.length],position:[0,0,50]});}\n// CONCATENATED MODULE: ./src/components/CustomMaterial.js\nvar CustomMaterial_CustomMaterial=/*#__PURE__*/function(_ShaderMaterial){Object(inherits[\"a\" /* default */])(CustomMaterial,_ShaderMaterial);var _super=Object(createSuper[\"a\" /* default */])(CustomMaterial);function CustomMaterial(){Object(classCallCheck[\"a\" /* default */])(this,CustomMaterial);return _super.call(this,{vertexShader:\"uniform float scale;\\n      uniform float shift;\\n      varying vec2 vUv;\\n      void main() {\\n        vec3 pos = position;\\n        pos.y = pos.y + ((sin(uv.x * 3.1415926535897932384626433832795) * shift * 2.0) * 0.125);\\n        vUv = uv;\\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\\n      }\",fragmentShader:\"uniform sampler2D tex;\\n      uniform float hasTexture;\\n      uniform float shift;\\n      uniform float scale;\\n      uniform vec3 color;\\n      uniform float opacity;\\n      varying vec2 vUv;\\n      void main() {\\n        float angle = 1.55;\\n        vec2 p = (vUv - vec2(0.5, 0.5)) * (1.0 - scale) + vec2(0.5, 0.5);\\n        vec2 offset = shift / 4.0 * vec2(cos(angle), sin(angle));\\n        vec4 cr = texture2D(tex, p + offset);\\n        vec4 cga = texture2D(tex, p);\\n        vec4 cb = texture2D(tex, p - offset);\\n        if (hasTexture == 1.0) gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\\n        else gl_FragColor = vec4(color, opacity);\\n      }\",uniforms:{tex:{value:null},hasTexture:{value:0},scale:{value:0},shift:{value:0},opacity:{value:1},color:{value:new three_module[\"Color\"](\"white\")}}});}Object(createClass[\"a\" /* default */])(CustomMaterial,[{key:\"scale\",get:function get(){return this.uniforms.scale.value;},set:function set(value){this.uniforms.scale.value=value;}},{key:\"shift\",get:function get(){return this.uniforms.shift.value;},set:function set(value){this.uniforms.shift.value=value;}},{key:\"map\",get:function get(){return this.uniforms.tex.value;},set:function set(value){this.uniforms.hasTexture.value=!!value;this.uniforms.tex.value=value;}},{key:\"color\",get:function get(){return this.uniforms.color.value;}},{key:\"opacity\",get:function get(){return this.uniforms.opacity.value;},set:function set(value){if(this.uniforms)this.uniforms.opacity.value=value;}}]);return CustomMaterial;}(three_module[\"ShaderMaterial\"]);Object(react_three_fiber_esm[\"b\" /* extend */])({CustomMaterial:CustomMaterial_CustomMaterial});\n// CONCATENATED MODULE: ./src/components/Plane.js\nvar Plane_excluded=[\"color\",\"shift\",\"opacity\",\"args\",\"map\"];var Plane=/*#__PURE__*/Object(react[\"forwardRef\"])(function(_ref,ref){var _ref$color=_ref.color,color=_ref$color===void 0?\"white\":_ref$color,_ref$shift=_ref.shift,shift=_ref$shift===void 0?1:_ref$shift,_ref$opacity=_ref.opacity,opacity=_ref$opacity===void 0?1:_ref$opacity,args=_ref.args,map=_ref.map,props=Object(objectWithoutProperties[\"a\" /* default */])(_ref,Plane_excluded);var _useBlock=useBlock(),viewportHeight=_useBlock.viewportHeight,offsetFactor=_useBlock.offsetFactor;var material=Object(react[\"useRef\"])();var last=store.top.current;Object(react_three_fiber_esm[\"c\" /* useFrame */])(function(){var pages=store.pages,top=store.top;material.current.scale=lerp_default()(material.current.scale,offsetFactor-top.current/((pages-1)*viewportHeight),0.1);material.current.shift=lerp_default()(material.current.shift,(top.current-last)/shift*1.5,0.1);last=top.current;});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"mesh\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({ref:ref},props),{},{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"planeBufferGeometry\",{args:args}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"customMaterial\",{ref:material,color:color,map:map,transparent:true,opacity:opacity})]}));});/* harmony default export */ var components_Plane = (Plane);\n// EXTERNAL MODULE: ./src/styles.css\nvar styles = __webpack_require__(47);\n\n// CONCATENATED MODULE: ./src/index.js\nfunction Startup(){var ref=Object(react[\"useRef\"])();Object(react_three_fiber_esm[\"c\" /* useFrame */])(function(){return ref.current.material.opacity=lerp_default()(ref.current.material.opacity,0,0.025);});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Plane,{ref:ref,color:\"#0e0e0f\",position:[0,0,200],scale:[100,100,1]});}function Paragraph(_ref){var image=_ref.image,index=_ref.index,offset=_ref.offset,factor=_ref.factor,header=_ref.header,aspect=_ref.aspect,text=_ref.text;var _useBlock=useBlock(),w=_useBlock.contentMaxWidth,canvasWidth=_useBlock.canvasWidth,margin=_useBlock.margin,mobile=_useBlock.mobile;var size=aspect<1&&!mobile?0.65:1;var alignRight=(canvasWidth-w*size-margin)/2;var pixelWidth=w*store.zoom*size;var left=!(index%2);var color=index%2?\"#D40749\":\"#2FE8C3\";return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Block,{factor:factor,offset:offset,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"group\",{position:[left?-alignRight:alignRight,0,0],children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Plane,{map:image,args:[1,1,32,32],shift:75,size:size,aspect:aspect,scale:[w*size,w*size/aspect,1],frustumCulled:false}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Html[\"a\" /* Html */],{style:{width:pixelWidth/(mobile?1:2),textAlign:left?\"left\":\"right\"},position:[left||mobile?-w*size/2:0,-w*size/2/aspect-0.4,1],children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{tabIndex:index,children:text})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{left:left,right:!left,size:w*0.04,color:color,top:true,position:[(left?-w:w)*size/2,w*size/aspect/2+0.5,-1],children:header}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Block,{factor:0.2,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{opacity:0.5,size:w*0.5,color:\"#1A1E2A\",position:[(left?w:-w)/2*size,w*size/aspect/1,-10],children:\"0\"+(index+1)})})]})});}function Content(){var images=Object(react_three_fiber_esm[\"d\" /* useLoader */])(three_module[\"TextureLoader\"],store.paragraphs.map(function(_ref2){var image=_ref2.image;return image;}));Object(react[\"useMemo\"])(function(){return images.forEach(function(texture){return texture.minFilter=three_module[\"LinearFilter\"];});},[images]);var _useBlock2=useBlock(),w=_useBlock2.contentMaxWidth,canvasWidth=_useBlock2.canvasWidth,canvasHeight=_useBlock2.canvasHeight,mobile=_useBlock2.mobile;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Block,{factor:1,offset:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Block,{offset:-0.1,shift:0.3,factor:2.1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"group\",{position:[2,-2,0],children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Plane,{map:images[0],shift:15,factor:2,aspect:0.3,args:[24,19,22,22],ssize:24})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Block,{factor:1.0,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Html[\"a\" /* Html */],{className:\"bottom-left\",style:{color:\"white\"},position:[-canvasWidth/2,-canvasHeight/2,0],children:[\"It was the year 2076.\",mobile?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}):\" \",\"The substance had arrived.\"]})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Block,{factor:1.2,offset:5.7,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text_MultilineText,{top:true,left:true,size:w*0.15,lineHeight:w/3,position:[-w/3.5,0,-1],color:\"#2fe8c3\",text:\"ZERO\\nDOWN\\nTIME\"})}),store.paragraphs.map(function(props,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Paragraph,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({index:index},props),{},{image:images[index]}),index);}),store.stripes.map(function(_ref3,index){var offset=_ref3.offset,color=_ref3.color,height=_ref3.height;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Block,{factor:-1.5,offset:offset,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Plane,{args:[50,height,32,32],shift:-4,color:color,rotation:[0,0,Math.PI/8],position:[0,0,-10]})},index);}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Block,{factor:1.25,offset:8,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Html[\"a\" /* Html */],{style:{color:\"white\"},className:\"bottom-left\",position:[-canvasWidth/2,-canvasHeight/2,0],children:\"Culture is not your friend.\"})})]});}function App(){var scrollArea=Object(react[\"useRef\"])();var onScroll=function onScroll(e){return store.top.current=e.target.scrollTop;};Object(react[\"useEffect\"])(function(){return void onScroll({target:scrollArea.current});},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_three_fiber_esm[\"a\" /* Canvas */],{linear:true,dpr:[1,2],orthographic:true,camera:{zoom:store.zoom,position:[0,0,500]},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react[\"Suspense\"],{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Html[\"a\" /* Html */],{center:true,className:\"loading\",children:\"Loading...\"}),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Content,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Diamonds,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Startup,{})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"scrollArea\",ref:scrollArea,onScroll:onScroll,children:new Array(store.sections).fill().map(function(_,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"0\"+index,style:{height:\"\".concat(store.pages/store.sections*100,\"vh\")}},index);})})]});}react_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App,{}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[48,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/sergey/code/grow/pres2/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/sergey/code/grow/pres2/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/sergey/code/grow/pres2/node_modules/postcss-loader/src/index.js??postcss!/Users/sergey/code/grow/pres2/src/styles.css","/Users/sergey/code/grow/pres2/src/store.js","/Users/sergey/code/grow/pres2/src/components/Text.js","/Users/sergey/code/grow/pres2/src/diamonds/BackfaceMaterial.js","/Users/sergey/code/grow/pres2/src/diamonds/RefractionMaterial.js","/Users/sergey/code/grow/pres2/src/blocks.js","/Users/sergey/code/grow/pres2/src/diamonds/Diamonds.js","/Users/sergey/code/grow/pres2/src/components/CustomMaterial.js","/Users/sergey/code/grow/pres2/src/components/Plane.js","/Users/sergey/code/grow/pres2/src/index.js"],"names":["state","sections","pages","zoom","paragraphs","offset","factor","header","image","aspect","text","stripes","color","height","diamonds","x","pos","Vector3","scale","top","createRef","Text","children","size","left","right","bottom","opacity","layers","font","props","data","useLoader","FontLoader","geom","useAsset","Promise","res","TextBufferGeometry","curveSegments","onUpdate","useCallback","self","box","geometry","computeBoundingBox","boundingBox","getSize","position","y","ref","useRef","last","current","useFrame","shift","lerp","MultilineText","lineHeight","split","map","index","colors","BackfaceMaterial","vertexShader","fragmentShader","side","BackSide","ShaderMaterial","RefractionMaterial","options","uniforms","envMap","value","backfaceMap","resolution","offsetContext","createContext","Block","useBlock","parentOffset","sectionHeight","undefined","curY","curTop","useThree","viewport","useContext","viewportWidth","width","viewportHeight","canvasWidth","canvasHeight","mobile","margin","contentMaxWidth","offsetFactor","dummy","Object3D","Diamonds","GLTFLoader","nodes","useLayoutEffect","pCone1_lambert1_0","center","gl","scene","camera","clock","model","ratio","getPixelRatio","useMemo","envFbo","WebGLRenderTarget","backfaceFbo","backfaceMaterial","refractionMaterial","texture","forEach","i","t","getElapsedTime","s","set","copy","length","rotation","updateMatrix","setMatrixAt","matrix","instanceMatrix","needsUpdate","autoClear","setRenderTarget","clearColor","render","clearDepth","material","CustomMaterial","tex","hasTexture","Color","extend","Plane","forwardRef","args","Startup","Paragraph","w","alignRight","pixelWidth","textAlign","Content","images","TextureLoader","minFilter","LinearFilter","Math","PI","App","scrollArea","onScroll","e","target","scrollTop","useEffect","Array","fill","_","ReactDOM","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import { createRef } from \"react\"\nimport { Vector3 } from \"three\"\n\nconst state = {\n  sections: 9,\n  pages: 8,\n  zoom: 75,\n  paragraphs: [\n    {\n      offset: 1,\n      factor: 1.75,\n      header: \"Don't trust, in a good way\",\n      image: \"/logo.png\",\n      aspect: 1.51,\n      text: \"Two thousand pharmacologists and bio-chemists were subsidized. Six years later it was being produced commercially.\"\n    },\n    {\n      offset: 2,\n      factor: 2.0,\n      header: \"Diamond Road\",\n      image: \"/photo-1519608487953-e999c86e7455.jpeg\",\n      aspect: 1.5,\n      text: \"The man who comes back through the Door in the Wall will never be quite the same as the man who went out. He will be wiser but less sure, happier but less self-satisfied, humbler in acknowledging his ignorance yet better equipped to understand the relationship of words to things, of systematic reasoning to the unfathomable mystery which it tries, forever vainly, to comprehend.\"\n    },\n    {\n      offset: 3,\n      factor: 2.25,\n      header: \"Catalina\",\n      image: \"/ph1.jpg\",\n      aspect: 1.5037,\n      text: \"The substance can take you to heaven but it can also take you to hell. Or else to both, together or alternately. Or else (if you're lucky, or if you've made yourself ready) beyond either of them. And then beyond the beyond, back to where you started from — back to here, back to New Rotham sted, back to business as usual. Only now, of course, business as usual is completely different.\"\n    },\n    {\n      offset: 4,\n      factor: 2.0,\n      header: \"Building 21\",\n      image: \"/keep-calm-the-server-is-down.png\",\n      aspect: 0.965,\n      text: \"We’ve found that the people whose EEG doesn’t show any alpha-wave activity when they’re relaxed aren’t likely to respond significantly to the substance. That means that, for about fifteen percent of the population, we have to find other approaches to liberation.\"\n    },\n    {\n      offset: 5,\n      factor: 2.0,\n      header: \"Building 21\",\n      image: \"/keep-calm-the-server-is-down.png\",\n      aspect: 0.965,\n      text: \"By cultivating the state of mind that makes it possible for the dazzling ecstatic insights to become permanent and habitual illuminations. By getting to know oneself to the point where one won’t be compelled by one’s unconscious to do all the ugly, absurd, self-stultifying things that one so often finds oneself doing.\"\n    },\n    { offset: 7, factor: 1.05, header: \"render.com\", image: \"/render.png\", aspect: 1.77, text: \"Education and enlightenment.\" }\n  ],\n  stripes: [\n    { offset: 0, color: \"#000\", height: 13 },\n    { offset: 6.3, color: \"#000\", height: 20 }\n  ],\n  diamonds: [\n    { x: 0, offset: 0.015, pos: new Vector3(), scale: 9, factor: 5.2 },\n    { x: 2, offset: 1.1, pos: new Vector3(), scale: 1.8, factor: 2.1 },\n    { x: -5, offset: 2, pos: new Vector3(), scale: 1.8, factor: 2.5 },\n    { x: 0, offset: 3.2, pos: new Vector3(), scale: 1.8, factor: 1.75 },\n    { x: 0.3, offset: 4.2, pos: new Vector3(), scale: 1.1, factor: 2.5 },\n    { x: 2, offset: 5.5, pos: new Vector3(), scale: 1.25, factor: 0.85 },\n    { x: -5, offset: 7, pos: new Vector3(), scale: 1.8, factor: 2 },\n    { x: 0, offset: 8, pos: new Vector3(), scale: 2.5, factor: 6 }\n  ],\n  top: createRef()\n}\n\nexport default state\n","import { FontLoader, Vector3, TextBufferGeometry } from \"three\"\nimport React, { useCallback, useRef } from \"react\"\nimport { useLoader, useFrame } from \"@react-three/fiber\"\nimport { useAsset } from \"use-asset\"\nimport lerp from \"lerp\"\nimport state from \"../store\"\n\nfunction Text({ children, size = 1, left, right, top, bottom, color = \"white\", opacity = 1, height = 0.01, layers = 0, font = \"/MOONGET_Heavy.blob\", ...props }) {\n  const data = useLoader(FontLoader, font)\n  const geom = useAsset(() => new Promise((res) => res(new TextBufferGeometry(children, { font: data, size: 1, height, curveSegments: 32 }))), [children])\n  const onUpdate = useCallback(\n    (self) => {\n      const box = new Vector3()\n      self.geometry.computeBoundingBox()\n      self.geometry.boundingBox.getSize(box)\n      self.position.x = left ? 0 : right ? -box.x : -box.x / 2\n      self.position.y = top ? 0 : bottom ? -box.y : -box.y / 2\n    },\n    [left, right, top, bottom]\n  )\n\n  const ref = useRef()\n  let last = state.top.current\n  useFrame(() => {\n    ref.current.shift = lerp(ref.current.shift, (state.top.current - last) / 100, 0.1)\n    last = state.top.current\n  })\n\n  return (\n    <group {...props} scale={[size, size, 0.1]}>\n      <mesh geometry={geom} onUpdate={onUpdate} frustumCulled={false}>\n        <customMaterial ref={ref} color={color} transparent opacity={opacity} />\n      </mesh>\n    </group>\n  )\n}\n\nconst MultilineText = ({ text, size = 1, lineHeight = 1, position = [0, 0, 0], ...props }) =>\n  text.split(\"\\n\").map((text, index) => <Text key={index} size={size} {...props} position={[position[0], position[1] - index * lineHeight, position[2]]} children={text} />)\n\nexport { Text, MultilineText }\n","import { ShaderMaterial, BackSide } from \"three\"\n\nconst colors = [\n  1.0,\n  1.0,\n  1.0,\n  1.0, // white\n  1.0,\n  0.0,\n  0.0,\n  1.0, // red\n  0.0,\n  1.0,\n  0.0,\n  1.0, // green\n  0.0,\n  0.0,\n  1.0,\n  1.0 // blue\n]\n\nexport default class BackfaceMaterial extends ShaderMaterial {\n  constructor() {\n    super({\n      vertexShader: `varying vec3 worldNormal;\n      void main() {\n        vec4 transformedNormal = vec4(normal, 0.9);\n        vec4 transformedPosition = vec4(position, 0.1);\n        #ifdef USE_INSTANCING\n          transformedNormal = instanceMatrix * transformedNormal;\n          transformedPosition = instanceMatrix * transformedPosition;\n        #endif\n        worldNormal = normalize(modelViewMatrix * transformedNormal).xyz;\n        gl_Position = projectionMatrix * modelViewMatrix * transformedPosition;\n      }`,\n      fragmentShader: `varying vec3 worldNormal;\n      void main() {\n        gl_FragColor = vec4(worldNormal, 1.0);\n      }`,\n      side: BackSide\n    })\n  }\n}\n","import { ShaderMaterial } from \"three\"\n\nexport default class RefractionMaterial extends ShaderMaterial {\n  constructor(options) {\n    super({\n      vertexShader: `varying vec3 worldNormal;\n      varying vec3 viewDirection;\n      void main() {\n        vec4 transformedNormal = vec4(normal, 0.);\n        vec4 transformedPosition = vec4(position, 1.0);\n        #ifdef USE_INSTANCING\n          transformedNormal = instanceMatrix * transformedNormal;\n          transformedPosition = instanceMatrix * transformedPosition;\n        #endif\n        worldNormal = normalize( modelViewMatrix * transformedNormal).xyz;\n        viewDirection = normalize((modelMatrix * vec4( position, 1.0)).xyz - cameraPosition);;\n        gl_Position = projectionMatrix * modelViewMatrix * transformedPosition;\n      }`,\n      fragmentShader: `uniform sampler2D envMap;\n      uniform sampler2D backfaceMap;\n      uniform vec2 resolution;\n      varying vec3 worldNormal;\n      varying vec3 viewDirection;\n      float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {\n        return pow(1.05 + dot(viewDirection, worldNormal), 100.0);\n      }\n      void main() {\n        vec2 uv = gl_FragCoord.xy / resolution;\n        vec3 normal = worldNormal * (1.0 - 0.7) - texture2D(backfaceMap, uv).rgb * 0.7;\n        vec4 color = texture2D(envMap, uv += refract(viewDirection, normal, 1.0/1.5).xy);\n        //gl_FragColor = vec4(mix(color.rgb, vec3(0.15), fresnelFunc(viewDirection, normal)), 1.0);\n        gl_FragColor = vec4(mix(color.rgb, vec3(0.4), fresnelFunc(viewDirection, normal)), 1.0);\n      }`,\n      uniforms: {\n        envMap: { value: options.envMap },\n        backfaceMap: { value: options.backfaceMap },\n        resolution: { value: options.resolution }\n      }\n    })\n  }\n}\n","import React, { createContext, useRef, useContext } from \"react\"\nimport { useFrame, useThree } from \"@react-three/fiber\"\nimport lerp from \"lerp\"\nimport state from \"./store\"\n\nconst offsetContext = createContext(0)\n\nfunction Block({ children, offset, factor, ...props }) {\n  const { offset: parentOffset, sectionHeight } = useBlock()\n  const ref = useRef()\n  offset = offset !== undefined ? offset : parentOffset\n  useFrame(() => {\n    const curY = ref.current.position.y\n    const curTop = state.top.current\n    ref.current.position.y = lerp(curY, (curTop / state.zoom) * factor, 0.1)\n  })\n  return (\n    <offsetContext.Provider value={offset}>\n      <group {...props} position={[0, -sectionHeight * offset * factor, 0]}>\n        <group ref={ref}>{children}</group>\n      </group>\n    </offsetContext.Provider>\n  )\n}\n\nfunction useBlock() {\n  const { sections, pages, zoom } = state\n  const { size, viewport } = useThree()\n  const offset = useContext(offsetContext)\n  const viewportWidth = viewport.width * zoom\n  const viewportHeight = viewport.height * zoom\n  const canvasWidth = viewportWidth / zoom\n  const canvasHeight = viewportHeight / zoom\n  const mobile = size.width < 700\n  const margin = canvasWidth * (mobile ? 0.2 : 0.1)\n  const contentMaxWidth = canvasWidth * (mobile ? 0.8 : 0.6)\n  const sectionHeight = canvasHeight * ((pages - 1) / (sections - 1))\n  const offsetFactor = (offset + 1.0) / sections\n  return {\n    viewport,\n    offset,\n    viewportWidth,\n    viewportHeight,\n    canvasWidth,\n    canvasHeight,\n    mobile,\n    margin,\n    contentMaxWidth,\n    sectionHeight,\n    offsetFactor\n  }\n}\n\nexport { Block, useBlock }\n","import { WebGLRenderTarget, Object3D } from \"three\"\nimport React, { useRef, useMemo, useLayoutEffect } from \"react\"\nimport { useLoader, useThree, useFrame } from \"@react-three/fiber\"\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\"\nimport lerp from \"lerp\"\nimport BackfaceMaterial from \"./BackfaceMaterial\"\nimport RefractionMaterial from \"./RefractionMaterial\"\nimport { useBlock } from \"../blocks\"\nimport state from \"../store\"\n\nconst dummy = new Object3D()\nexport default function Diamonds() {\n  const { nodes } = useLoader(GLTFLoader, \"/diamond.glb\")\n  useLayoutEffect(() => nodes.pCone1_lambert1_0.geometry.center(), [])\n\n  const { size, gl, scene, camera, clock } = useThree()\n  const { contentMaxWidth, sectionHeight, mobile } = useBlock()\n  const model = useRef()\n  const ratio = gl.getPixelRatio()\n\n  const [envFbo, backfaceFbo, backfaceMaterial, refractionMaterial] = useMemo(() => {\n    const envFbo = new WebGLRenderTarget(size.width * ratio, size.height * ratio)\n    const backfaceFbo = new WebGLRenderTarget(size.width * ratio, size.height * ratio)\n    const backfaceMaterial = new BackfaceMaterial()\n    const refractionMaterial = new RefractionMaterial({\n      envMap: envFbo.texture,\n      backfaceMap: backfaceFbo.texture,\n      resolution: [size.width * ratio, size.height * ratio]\n    })\n    return [envFbo, backfaceFbo, backfaceMaterial, refractionMaterial]\n  }, [size, ratio])\n\n  useFrame(() => {\n    state.diamonds.forEach((data, i) => {\n      const t = clock.getElapsedTime() / 9\n      const { x, offset, scale, factor } = data\n      const s = (contentMaxWidth / 35) * scale\n      data.pos.set(mobile ? 0 : x, lerp(data.pos.y, -sectionHeight * offset * factor + (state.top.current / state.zoom) * factor, 0.1), 0)\n      dummy.position.copy(data.pos)\n      if (i === state.diamonds.length - 1) dummy.rotation.set(0, t, 0)\n      else dummy.rotation.set(t, t, t)\n      dummy.scale.set(s, s, s)\n      dummy.updateMatrix()\n      model.current.setMatrixAt(i, dummy.matrix)\n      model.current.instanceMatrix.needsUpdate = true\n    })\n\n    gl.autoClear = false\n    camera.layers.set(0)\n    gl.setRenderTarget(envFbo)\n    gl.clearColor()\n    gl.render(scene, camera)\n    gl.clearDepth()\n    camera.layers.set(1)\n    model.current.material = backfaceMaterial\n    gl.setRenderTarget(backfaceFbo)\n    gl.clearDepth()\n    gl.render(scene, camera)\n    camera.layers.set(0)\n    gl.setRenderTarget(null)\n    gl.render(scene, camera)\n    gl.clearDepth()\n    camera.layers.set(1)\n    model.current.material = refractionMaterial\n    gl.render(scene, camera)\n  }, 1)\n\n  return <instancedMesh ref={model} layers={1} args={[nodes.pCone1_lambert1_0.geometry, null, state.diamonds.length]} position={[0, 0, 50]} />\n}\n","import { ShaderMaterial, Color } from \"three\"\nimport { extend } from \"@react-three/fiber\"\n\nclass CustomMaterial extends ShaderMaterial {\n  constructor() {\n    super({\n      vertexShader: `uniform float scale;\n      uniform float shift;\n      varying vec2 vUv;\n      void main() {\n        vec3 pos = position;\n        pos.y = pos.y + ((sin(uv.x * 3.1415926535897932384626433832795) * shift * 2.0) * 0.125);\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\n      }`,\n      fragmentShader: `uniform sampler2D tex;\n      uniform float hasTexture;\n      uniform float shift;\n      uniform float scale;\n      uniform vec3 color;\n      uniform float opacity;\n      varying vec2 vUv;\n      void main() {\n        float angle = 1.55;\n        vec2 p = (vUv - vec2(0.5, 0.5)) * (1.0 - scale) + vec2(0.5, 0.5);\n        vec2 offset = shift / 4.0 * vec2(cos(angle), sin(angle));\n        vec4 cr = texture2D(tex, p + offset);\n        vec4 cga = texture2D(tex, p);\n        vec4 cb = texture2D(tex, p - offset);\n        if (hasTexture == 1.0) gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n        else gl_FragColor = vec4(color, opacity);\n      }`,\n      uniforms: {\n        tex: { value: null },\n        hasTexture: { value: 0 },\n        scale: { value: 0 },\n        shift: { value: 0 },\n        opacity: { value: 1 },\n        color: { value: new Color(\"white\") }\n      }\n    })\n  }\n\n  set scale(value) {\n    this.uniforms.scale.value = value\n  }\n\n  get scale() {\n    return this.uniforms.scale.value\n  }\n\n  set shift(value) {\n    this.uniforms.shift.value = value\n  }\n\n  get shift() {\n    return this.uniforms.shift.value\n  }\n\n  set map(value) {\n    this.uniforms.hasTexture.value = !!value\n    this.uniforms.tex.value = value\n  }\n\n  get map() {\n    return this.uniforms.tex.value\n  }\n\n  get color() {\n    return this.uniforms.color.value\n  }\n\n  get opacity() {\n    return this.uniforms.opacity.value\n  }\n\n  set opacity(value) {\n    if (this.uniforms) this.uniforms.opacity.value = value\n  }\n}\n\nextend({ CustomMaterial })\n","import React, { forwardRef, useRef } from \"react\"\nimport { useFrame } from \"@react-three/fiber\"\nimport lerp from \"lerp\"\nimport \"./CustomMaterial\"\nimport { useBlock } from \"../blocks\"\nimport state from \"../store\"\n\nconst Plane = forwardRef(({ color = \"white\", shift = 1, opacity = 1, args, map, ...props }, ref) => {\n  const { viewportHeight, offsetFactor } = useBlock()\n  const material = useRef()\n  let last = state.top.current\n  useFrame(() => {\n    const { pages, top } = state\n    material.current.scale = lerp(material.current.scale, offsetFactor - top.current / ((pages - 1) * viewportHeight), 0.1)\n    material.current.shift = lerp(material.current.shift, ((top.current - last) / shift) * 1.5, 0.1)\n    last = top.current\n  })\n  return (\n    <mesh ref={ref} {...props}>\n      <planeBufferGeometry args={args} />\n      <customMaterial ref={material} color={color} map={map} transparent opacity={opacity} />\n    </mesh>\n  )\n})\n\nexport default Plane\n","import ReactDOM from \"react-dom\"\nimport React, { Suspense, useEffect, useRef, useMemo } from \"react\"\nimport { Canvas, useLoader, useFrame } from \"@react-three/fiber\"\nimport { Html } from \"@react-three/drei\"\nimport { TextureLoader, LinearFilter } from \"three\"\nimport lerp from \"lerp\"\nimport { Text, MultilineText } from \"./components/Text\"\nimport Diamonds from \"./diamonds/Diamonds\"\nimport Plane from \"./components/Plane\"\nimport { Block, useBlock } from \"./blocks\"\nimport state from \"./store\"\nimport \"./styles.css\"\n\nfunction Startup() {\n  const ref = useRef()\n  useFrame(() => (ref.current.material.opacity = lerp(ref.current.material.opacity, 0, 0.025)))\n  return <Plane ref={ref} color=\"#0e0e0f\" position={[0, 0, 200]} scale={[100, 100, 1]} />\n}\n\nfunction Paragraph({ image, index, offset, factor, header, aspect, text }) {\n  const { contentMaxWidth: w, canvasWidth, margin, mobile } = useBlock()\n  const size = aspect < 1 && !mobile ? 0.65 : 1\n  const alignRight = (canvasWidth - w * size - margin) / 2\n  const pixelWidth = w * state.zoom * size\n  const left = !(index % 2)\n  const color = index % 2 ? \"#D40749\" : \"#2FE8C3\"\n  return (\n    <Block factor={factor} offset={offset}>\n      <group position={[left ? -alignRight : alignRight, 0, 0]}>\n        <Plane map={image} args={[1, 1, 32, 32]} shift={75} size={size} aspect={aspect} scale={[w * size, (w * size) / aspect, 1]} frustumCulled={false} />\n        <Html\n          style={{ width: pixelWidth / (mobile ? 1 : 2), textAlign: left ? \"left\" : \"right\" }}\n          position={[left || mobile ? (-w * size) / 2 : 0, (-w * size) / 2 / aspect - 0.4, 1]}>\n          <div tabIndex={index}>{text}</div>\n        </Html>\n        <Text left={left} right={!left} size={w * 0.04} color={color} top position={[((left ? -w : w) * size) / 2, (w * size) / aspect / 2 + 0.5, -1]}>\n          {header}\n        </Text>\n        <Block factor={0.2}>\n          <Text opacity={0.5} size={w * 0.5} color=\"#1A1E2A\" position={[((left ? w : -w) / 2) * size, (w * size) / aspect / 1, -10]}>\n            {\"0\" + (index + 1)}\n          </Text>\n        </Block>\n      </group>\n    </Block>\n  )\n}\n\nfunction Content() {\n  const images = useLoader(\n    TextureLoader,\n    state.paragraphs.map(({ image }) => image)\n  )\n  useMemo(() => images.forEach((texture) => (texture.minFilter = LinearFilter)), [images])\n  const { contentMaxWidth: w, canvasWidth, canvasHeight, mobile } = useBlock()\n  return (\n    <>\n      <Block factor={1} offset={0}>\n        <Block offset={-0.1} shift={0.3} factor={2.1}>\n          <group position={[2, -2, 0]}>\n            <Plane map={images[0]} shift={15} factor={2} aspect={0.3} args={[24, 19, 22, 22]} ssize={24} />\n          </group>\n        </Block>\n        <Block factor={1.0}>\n          <Html className=\"bottom-left\" style={{ color: \"white\" }} position={[-canvasWidth / 2, -canvasHeight / 2, 0]}>\n            It was the year 2076.{mobile ? <br /> : \" \"}The substance had arrived.\n          </Html>\n        </Block>\n      </Block>\n      <Block factor={1.2} offset={5.7}>\n        <MultilineText top left size={w * 0.15} lineHeight={w / 3} position={[-w / 3.5, 0, -1]} color=\"#2fe8c3\" text={\"ZERO\\nDOWN\\nTIME\"} />\n      </Block>\n      {state.paragraphs.map((props, index) => (\n        <Paragraph key={index} index={index} {...props} image={images[index]} />\n      ))}\n      {state.stripes.map(({ offset, color, height }, index) => (\n        <Block key={index} factor={-1.5} offset={offset}>\n          <Plane args={[50, height, 32, 32]} shift={-4} color={color} rotation={[0, 0, Math.PI / 8]} position={[0, 0, -10]} />\n        </Block>\n      ))}\n      <Block factor={1.25} offset={8}>\n        <Html style={{ color: \"white\" }} className=\"bottom-left\" position={[-canvasWidth / 2, -canvasHeight / 2, 0]}>\n          Culture is not your friend.\n        </Html>\n      </Block>\n    </>\n  )\n}\n\nfunction App() {\n  const scrollArea = useRef()\n  const onScroll = (e) => (state.top.current = e.target.scrollTop)\n  useEffect(() => void onScroll({ target: scrollArea.current }), [])\n  return (\n    <>\n      <Canvas linear dpr={[1, 2]} orthographic camera={{ zoom: state.zoom, position: [0, 0, 500] }}>\n        <Suspense fallback={<Html center className=\"loading\" children=\"Loading...\" />}>\n          <Content />\n          <Diamonds />\n          <Startup />\n        </Suspense>\n      </Canvas>\n      <div className=\"scrollArea\" ref={scrollArea} onScroll={onScroll}>\n        {new Array(state.sections).fill().map((_, index) => (\n          <div key={index} id={\"0\" + index} style={{ height: `${(state.pages / state.sections) * 100}vh` }} />\n        ))}\n      </div>\n    </>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"]}}