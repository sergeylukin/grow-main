{"ast":null,"code":"import { defaults, forEach } from \"../../../utils/utils\";\nimport { resolveGrammar as orgResolveGrammar } from \"../resolver\";\nimport { validateGrammar as orgValidateGrammar } from \"../checks\";\nimport { defaultGrammarResolverErrorProvider, defaultGrammarValidatorErrorProvider } from \"../../errors_public\";\nimport { DslMethodsCollectorVisitor } from \"./gast\";\nexport function resolveGrammar(options) {\n  options = defaults(options, {\n    errMsgProvider: defaultGrammarResolverErrorProvider\n  });\n  var topRulesTable = {};\n  forEach(options.rules, function (rule) {\n    topRulesTable[rule.name] = rule;\n  });\n  return orgResolveGrammar(topRulesTable, options.errMsgProvider);\n}\nexport function validateGrammar(options) {\n  options = defaults(options, {\n    errMsgProvider: defaultGrammarValidatorErrorProvider\n  });\n  return orgValidateGrammar(options.rules, options.maxLookahead, options.tokenTypes, options.errMsgProvider, options.grammarName);\n}\nexport function assignOccurrenceIndices(options) {\n  forEach(options.rules, function (currRule) {\n    var methodsCollector = new DslMethodsCollectorVisitor();\n    currRule.accept(methodsCollector);\n    forEach(methodsCollector.dslMethods, function (methods) {\n      forEach(methods, function (currMethod, arrIdx) {\n        currMethod.idx = arrIdx + 1;\n      });\n    });\n  });\n}","map":{"version":3,"mappings":"AAEA,SAASA,QAAT,EAAmBC,OAAnB,QAAkC,sBAAlC;AACA,SAASC,cAAc,IAAIC,iBAA3B,QAAoD,aAApD;AACA,SAASC,eAAe,IAAIC,kBAA5B,QAAsD,WAAtD;AACA,SACEC,mCADF,EAEEC,oCAFF,QAGO,qBAHP;AAIA,SAASC,0BAAT,QAA2C,QAA3C;AASA,OAAM,SAAUN,cAAV,CAAyBO,OAAzB,EAGL;AACCA,SAAO,GAAGT,QAAQ,CAACS,OAAD,EAAU;AAC1BC,kBAAc,EAAEJ;AADU,GAAV,CAAlB;AAIA,MAAMK,aAAa,GAAG,EAAtB;AACAV,SAAO,CAACQ,OAAO,CAACG,KAAT,EAAgB,UAACC,IAAD,EAAK;AAC1BF,iBAAa,CAACE,IAAI,CAACC,IAAN,CAAb,GAA2BD,IAA3B;AACD,GAFM,CAAP;AAGA,SAAOV,iBAAiB,CAACQ,aAAD,EAAgBF,OAAO,CAACC,cAAxB,CAAxB;AACD;AAED,OAAM,SAAUN,eAAV,CAA0BK,OAA1B,EAML;AACCA,SAAO,GAAGT,QAAQ,CAACS,OAAD,EAAU;AAC1BC,kBAAc,EAAEH;AADU,GAAV,CAAlB;AAIA,SAAOF,kBAAkB,CACvBI,OAAO,CAACG,KADe,EAEvBH,OAAO,CAACM,YAFe,EAGvBN,OAAO,CAACO,UAHe,EAIvBP,OAAO,CAACC,cAJe,EAKvBD,OAAO,CAACQ,WALe,CAAzB;AAOD;AAED,OAAM,SAAUC,uBAAV,CAAkCT,OAAlC,EAA4D;AAChER,SAAO,CAACQ,OAAO,CAACG,KAAT,EAAgB,UAACO,QAAD,EAAS;AAC9B,QAAMC,gBAAgB,GAAG,IAAIZ,0BAAJ,EAAzB;AACAW,YAAQ,CAACE,MAAT,CAAgBD,gBAAhB;AACAnB,WAAO,CAACmB,gBAAgB,CAACE,UAAlB,EAA8B,UAACC,OAAD,EAAQ;AAC3CtB,aAAO,CAACsB,OAAD,EAAU,UAACC,UAAD,EAAwCC,MAAxC,EAA8C;AAC7DD,kBAAU,CAACE,GAAX,GAAiBD,MAAM,GAAG,CAA1B;AACD,OAFM,CAAP;AAGD,KAJM,CAAP;AAKD,GARM,CAAP;AASD","names":["defaults","forEach","resolveGrammar","orgResolveGrammar","validateGrammar","orgValidateGrammar","defaultGrammarResolverErrorProvider","defaultGrammarValidatorErrorProvider","DslMethodsCollectorVisitor","options","errMsgProvider","topRulesTable","rules","rule","name","maxLookahead","tokenTypes","grammarName","assignOccurrenceIndices","currRule","methodsCollector","accept","dslMethods","methods","currMethod","arrIdx","idx"],"sourceRoot":"","sources":["../../../../../src/parse/grammar/gast/gast_resolver_public.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}